<html>

<head>
    <title>My website</title>
    <script>
        var exports = {};
    </script>

    <!-- <script src="http://localhost:8888/tracker"></script> -->

    <!-- Реализация сниппета по мотивам Google Analytics -->
    <!-- FundraiseUp Analytics -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['FundraiseUp'] = r;
            i[r] = i[r] || {
                [a]: function() {
                    (i[r].q = i[r].q || []).push(arguments)
                }
            }, i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'http://localhost:8888/tracker', 'tracker', 'track');

        tracker.track('pageview');
        tracker.track('test', 'one', 'two', 'three');
    </script>
    <!-- Объяснение по сниппету в README.md -->
    <!-- End FundraiseUp Analytics -->

</head>

<body>
    <button onclick="tracker.track('click-button')">Click me</button>
    <ul>
        <li><a href="/1.html" onclick="tracker.track('click-link', '1')">1.html</a></li>
        <li><a href="/2.html" onclick="tracker.track('click-link', '2')">2.html</a></li>
        <li><a href="/3.html" onclick="tracker.track('click-link', '3', 'three')">3.html</a></li>
    </ul>

    <!-- Реализация ожидания отправки данных перед переходом по ссылкам -->
    <script>
        document.querySelectorAll('a').forEach((element) => element.addEventListener('click', async (event) => {
            event.preventDefault();
            const completed = await tracker.track();
            if (completed === true) window.location.href = event.target.href;
        }));
    </script>
</body>

</html>